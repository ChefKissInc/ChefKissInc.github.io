---
title: ACPI
description: SSDTs التي يجب إضافتها إلى Hackintosh EFI الخاص بك.
---

import Aside from '~/components/Aside.astro';

<Aside type="tip">
`واجهة التكوين والطاقة المتقدمة` (ACPI) هي معيار مفتوح يمكن لأنظمة التشغيل استخدامه لاكتشاف وتكوين مكونات أجهزة الكمبيوتر، وإجراء إدارة الطاقة (على سبيل المثال إيقاف تشغيل وحدة تحكم USB)، والتكوين التلقائي (على سبيل المثال التوصيل والتشغيل، والتبديل السريع) ومراقبة الحالة.

يمكن للمصنعين إجراء فحوصات لنظام التشغيل، والتي يتم إجراؤها عادةً لتعطيل بعض الأجهزة والوظائف الأخرى على أنظمة التشغيل التي لا يعتزمون دعمها.

الجدول الرئيسي لـ ACPI هو `DSDT` (Differentiated System Description Table), تعريف أغلب الأجهزة. ثم هناك `SSDT`s (Secondary System Description Tables), إضافة خصائص إضافية (على سبيل المثال، طريقة `_PRW` (موارد الطاقة للاستيقاظ)), أجهزة إضافية، وتعطيل بعض الأجهزة بناءً على شرط معين، وما إلى ذلك.

تحدد معظم البرامج الثابتة الأجهزة الموجودة في `DSDT` وتستخدم بعض `SSDT` لضبط القيم وفقًا للأجهزة المثبتة و/أو إعدادات BIOS. إذا كنت مهتمًا بـ ACPI، فيمكنك قراءة مواصفات ACPI المذكورة في [مواصفات منتدى UEFI](https://uefi.org/specifications).

</Aside>

## تنزيل SSDTTime

<Aside type="note" title="هل تعلم؟">
في الماضي، كان يجب كتابة SSDTs هذه يدويًا، ولكن الآن توجد أدوات آلية لهذه العملية. سيتم استخدام [`SSDTTime`](https://github.com/corpnewt/SSDTTime) في هذا الدليل.
</Aside>

نظرًا لأن `SSDTTime` ليس لديه أي إصدارات وهو مشروع Python، فقم بتنزيل الكود المصدر بدلاً من ذلك بالنقر فوق `Code` ثم `Download ZIP`.

![صفحة تنزيل SSDTTime](~/assets/SSDTTimeDownload.png)

## تشغيل SSDTTime

بعد استخراج الأرشيف، يجب على مستخدمي Windows تشغيل `SSDTTime.bat`.

سيتعين على مستخدمي Linux فتح محطتهم الطرفية داخل الدليل المستخرج `SSDTTime`/`SSDTTime-master` ثم تشغيل `python3 SSDTTime.py`. **تأكد من تثبيت Python 3 لديك.**

يجب على مستخدمي macOS تشغيل `SSDTTime.command`.

عند تشغيل الأداة، سيتم تنزيل `iASL` تلقائيًا، والذي يقوم (بفك)تجميع جداول ACPI. بعد ذلك، ستظهر لك الشاشة التالية.

![وحدة تحكم SSDTTime](~/assets/SSDTTimeConsole.png)

### تحديد ACPI للنظام المستهدف

حدد الخيار `P` على النظام المستهدف لتفريغ جداول ACPI المطلوبة لعمليات `SSDTTime`.

إذا لم تكن تقوم بتشغيل `SSDTTime` على النظام المستهدف، فحدد `D` بدلاً من ذلك لاختيار المجلد الذي يحتوي على جداول ACPI المنسوخة من هذا الجهاز المستهدف.

يجب أن يعرض البرنامج الآن جداول ACPI المحملة في الأعلى كما هو موضح في لقطة الشاشة أدناه.

![SSDTTime](~/assets/SSDTTimeConsole_ACPILoaded.png)

### إنشاء SSDTs

<Aside type="note">
سيتم تطبيق معظم هذه التصحيحات على نظام macOS فقط ولا ينبغي أن تسبب أي آثار جانبية على أنظمة التشغيل الأخرى
</Aside>

<details>
<summary>معلومات حول الخيارات</summary>

في وقت كتابة هذا الدليل, هناك 12 خيارًا متاحًا

- `FixHPET`

  إصلاح تعارضات `IRQ` (Interrupt Request) في جداول ACPI. يمكن أن تتسبب هذه التعارضات في عدم عمل بعض الأجهزة مثل الصوت بشكل صحيح.

  <Aside type="danger">
  لا تستخدم هذا الخيار على AMD، لأنه قد يسبب ضررًا أكثر من نفعه (لوحة التتبع لا تعمل، وما إلى ذلك).
  </Aside>

- `FakeEC`

  ينشئ جهاز Embedded Controller وهميًا ليعمل نظام macOS بشكل صحيح **و** يعطل EC الأصلي.

- `FakeEC Laptop`

  ينشئ جهاز Embedded Controller وهميًا ليعمل نظام macOS بشكل صحيح، لكنه لا يعطل EC الأصلي، لأن أجهزة الكمبيوتر المحمولة تحتاج إليه لمعرفة حالة البطارية ومفاتيح FN وما إلى ذلك.

- `USBX`

  Cينشئ جهاز USBX يحتوي على خصائص طاقة USB اللازمة للوظيفة المناسبة. يتطلب هذا أيضًا جهاز EC صالحًا.

- `PluginType`

  تعيين خاصية `plugin-type` إلى `1` في نواة وحدة المعالجة المركزية الأولى، مما يمكّن `X86PlatformPlugin`، الذي يسمح بإدارة طاقة وحدة المعالجة المركزية ووحدة معالجة الرسومات (يختلف الدعم).
  كما أنه يعيد تعريف المعالجات باستخدام كائنات `Processor` بدلاً من كائنات `Device` إذا لزم الأمر، نظرًا لأن macOS لا يدعم المعيار الأحدث.

- `PMC`

  يحدد جهاز `PMCR` على الأنظمة التي لا تحتوي عليه للسماح بدعم `NVRAM` الأصلي.

- `RTCAWAC`

  يقوم بتعطيل `AWAC` (ساعة تنبيه ACPI) الجديدة ويقوم بتمكين `RTC` (ساعة الوقت الحقيقي) بدلاً من ذلك.

- `USB Reset`

  يقوم بتعطيل أجهزة `RHUB` في ACPI لجميع وحدات تحكم USB للسماح لنظام macOS بحصر منافذ USB بشكل صحيح على أنظمة ACPI المعطلة.

- `PCI Bridge`

  يحدد جسور PCI لمسار الجهاز المحدد حيث أن بعض الأجهزة قد لا يكون لديها جسور PCI محددة مما يجعل OpenCore غير قادر على إدخال الخصائص باستخدام مفتاح `DeviceProperties` في التكوين.

- `PNLF`

  ينشئ جهاز `PNLF` وهميًا بـ `_UID` قابل للاختيار من قبل المستخدم (الملف الشخصي الذي يستخدمه في الأساس) للسماح بالتحكم في السطوع الأصلي على أجهزة الكمبيوتر المحمولة.

  <Aside type="danger">
  للوهلة الأولى قد يبدو كما لو أنه يدعم أجهزة الكمبيوتر المحمولة AMD، لكنه ليس مثل الموجود في صفحة [NootedRed](/ar/applehax/nootedred/).
  استخدم ما هو موجود في الصفحة المذكورة أعلاه بدلاً من ذلك.
  </Aside>

- `XOSI`

  يقوم بتزييف نظام التشغيل إلى Windows، مما يسمح لأي أجهزة طرفية مقفلة خلف نظام تشغيل غير macOS بأن تكون نشطة على macOS.

- `Fix DMAR`

  يزيل مناطق الذاكرة المحجوزة من جدول "DMAR". وهو مطلوب للحصول على بعض الأجهزة مثل وحدات تحكم إيثرنت المستندة إلى Intel I225 على أنظمة Intel.

  <Aside type="danger">
  إذا كنت تستخدم بالفعل نظام التشغيل macOS 12.2.1 والإصدارات الأقدم ووحدة تحكم إيثرنت تعتمد على Intel I225، فستحتاج إلى إزالة `e1000=0` أو `dk.e1000=0` من وسيطات التمهيد الخاصة بك بعد القيام بذلك.
  </Aside>

</details>

يجب على **_جميع_** الأنظمة اختيار ما يلي

- `USBX`,

  اختر الخيار **الافتراضي** (مفتاح `B`).

- `RTCAWAC`,

  إذا قيل لك أنك لا تحتاج إليه، فتخطَّ هذا SSDT.

- `PluginType`,
- و `USB Reset`.

يجب على أجهزة **_سطح المكتب_** AMD **أيضًا** اختيار ما يلي

- `FakeEC`.

يجب على أجهزة **_الكمبيوتر المحمولة_** AMD **أيضًا** اختيار ما يلي

- `FakeEC Laptop`,
- `XOSI`,

  اختر الخيار **الافتراضي** (مفتاح `A`)

- وأي SSDTs متعلقة بالإضاءة الخلفية مطلوبة في صفحة [NootedRed](/applehax/nootedred/).

<details>
<summary>مثال على الإجراء</summary>
استنادًا إلى ASRock B550m Phantom.

![نتيجة SSDTTime FakeEC](~/assets/SSDTTime_FakeEC_Result.png)
![موجه SSDTTime USBX](~/assets/SSDTTime_USBX_Prompt.png)
![نتيجة SSDTTime USBX](~/assets/SSDTTime_USBX_Result.png)
![نتيجة SSDTTime PLuginType](~/assets/SSDTTime_PluginType_Result.png)
![نتيجة SSDTTime RTCAWAC](~/assets/SSDTTime_RTCAWAC_Result.png)
![نتيجة SSDTTime USB Reset](~/assets/SSDTTime_USBReset_Result.png)
![موجه SSDTTime XOSI](~/assets/SSDTTime_XOSI_Prompt.png)
![نتيجة SSDTTime XOSI](~/assets/SSDTTime_XOSI_Result.png)

</details>

## نسخ ملفات AML من مجلد النتائج

سيبدو مجلد `Results` مشابهًا لما يلي بعد الانتهاء.

![SSDTTime Results](~/assets/SSDTTimeResults.png)

الآن، انسخ جميع الملفات التي تبدأ بـ `SSDT` وتنتهي بـ `.aml` داخل جذر مجلد `Results` إلى `Drive/EFI/OC/ACPI`.

### دمج تصحيحات OC باستخدام PatchMerge

أخيرًا، قم بدمج `patches_OC.plist` باستخدام البرنامج النصي `PatchMerge` المضمن مع `SSDTTime`. قم بتشغيله بنفس الطريقة التي قمت بها باستخدام `SSDTTime`.

![PatchMerge](~/assets/PatchMerge.png)

اضغط على `1` لتحديد `Config.plist` الذي تم إنشاؤه في خطوة سابقة، ثم اسحب وأفلِت `Config.plist` على النافذة، واضغط على Enter.

![PatchMerge بعد إختيار `Config.plist`](~/assets/PatchMerge_AfterSelect.png)

بعد ذلك، اضغط على `2` لبدء عملية الدمج.

![PatchMerge بعد تشغيل عملية الدمج](~/assets/PatchMerge_Result.png)

سيظهر ملف `Config.plist` المعدل مع التصحيحات المدمجة في مجلد `Results`.

تأكد من أن الأمر على ما يرام، ثم استبدل ملف `Config.plist` الأصلي بالملف الذي تم إنشاؤه حديثًا.
